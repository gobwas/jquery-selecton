/**
 * jquery-selecton - jquery plugin that converts select elements.
 *
 * Version: 0.1.2
 * Date: 2014-06-26 15:14:03
 *
 * Copyright 2014, Sergey Kamardin <gobwas@gmail.com>.
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Repository: https://github.com/gobwas/jquery-selecton.git
 * Location: Moscow, Russia.
 */


 !function(t,e){var n,i,s;if(i="object"==typeof module&&module.exports,n="function"==typeof define&&define.amd,i)s=require("jQuery"),module.exports=e(s);else{if(!n)return s=t.jQuery,e(s);define(["jquery"],function(t){return e(t)})}}(this,function(t){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.noscope=t()}}(function(){return function e(t,n,i){function s(r,c){if(!n[r]){if(!t[r]){var a="function"==typeof require&&require;if(!c&&a)return a(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e){(function(n){var i,s="undefined"!=typeof window?t:"undefined"!=typeof n?n.jQuery:null,o=e("./selecton"),r=e("./selecton/processor"),c=e("./selecton/processor/dropdown"),a=e("./selecton/processor/buttons"),l=e("./selecton/utils"),u=l.isFunction,f=l.isString;i=s.fn.selecton,s.fn.selecton=function(t){var e;return e=Array.prototype.slice.call(arguments,1),this.map(function(){var n,i,r;return f(t)?(i=t,t={}):t||(t={}),f(t.processor)&&u(r=s.fn.selecton.processors[t.processor])&&(t.processor=new r),n=s(this).data("selecton"),n||(n=new o(this,t),n.initialize(),s(this).data("selecton",n)),i&&u(n[i])?n[i].apply(n,e):n})},s.fn.selecton.processor=r,s.fn.selecton.processors={button:a,dropdown:c},s.fn.selecton.noConflict=function(){s.fn.selecton=i}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./selecton":2,"./selecton/processor":4,"./selecton/processor/buttons":5,"./selecton/processor/dropdown":6,"./selecton/utils":8}],2:[function(e,n){(function(i){var s,o="undefined"!=typeof window?t:"undefined"!=typeof i?i.jQuery:null,r=e("./selecton/processor");s=function(t,e){var n;if(e=e||{},!((n=e.processor)instanceof r))throw new TypeError("Processor is expected");this.target=t,this.$target=o(t),this.processor=n,this.options=o.extend(!0,{},s.DEFAULTS,e),this.units=[]},s.prototype=function(){var t;return t=function(t){var e;t.hide(),(e=t.attr("id"))&&t.parent().find('label[for="'+e+'"]').hide()},{constructor:s,initialize:function(){var e,n,i,s;n=this,s=this.processor,s.bind(o.proxy(this.select,this)),e=this.options.source,this.selected=null,this.inputs=[],this.data=[],this.items=[],this.buttons=[],s.initialize(this.target),i=[],e.tagName&&i.push(e.tagName),e.selector&&i.push(e.selector),i=i.join(""),this.$target.find(i).each(function(t,i){var r,c,a;r=o(i),r.data(n.options.storageKey,{id:t}),n.inputs[t]=r,c={},o.each(e.data,function(t,e){var n,i;n=r[e.selector],c[t]=(i=e.key)?n.call(r,i):n.call(r)}),(a=s.unit(c,t))&&(n.units[t]=a)}),this.$target.on("destroy",o.proxy(n.destroy,n)),s.finalize(),t(this.$target)},destroy:function(){this.processor.destroy()},select:function(t){var e,n=this;e=this.options.source,null!==n.selected&&n.inputs[n.selected][e.data.selected.selector](e.data.selected.key,!1),n.inputs[t][e.data.selected.selector](e.data.selected.key,!0),n.selected!==t&&(n.$target.trigger("change"),n.selected=t)}}}(),s.DEFAULTS={storageKey:"selecton-storage",source:{tagName:"option",selector:null,data:{value:{selector:"attr",key:"value"},title:{selector:"attr",key:"title"},content:{selector:"text"},selected:{selector:"prop",key:"selected"},disabled:{selector:"prop",key:"disabled"},"class":{selector:"attr",key:"class"},skip:{selector:"data",key:"selecton-skip"}}}},o.event.special.destroy||(o.event.special.destroy={remove:function(t){t.handler&&t.handler()}}),n.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./selecton/processor":4}],3:[function(t,e){var n=function(t,e,n){var i;n||(n=null);for(var s in t)if(t.hasOwnProperty(s)&&(i=e.call(n,t[s],s,t),void 0!==i))return i;return i},i=function(t){for(var e=Array.prototype.slice.call(arguments,1),i=function(e,n){t[n]=e},s=0;s<e.length;s++)n(e[s],i);return t},s=function(t,e,n){function s(){}var o;return e||(e={}),n||(n={}),o=e.hasOwnProperty("constructor")&&"function"==typeof e.constructor?e.constructor:function(){t.apply(this,arguments)},i(o,t,n),s.prototype=t.prototype,o.prototype=new s,i(o.prototype,e,{constructor:o}),o.__super__=t.prototype,o};e.exports=s},{}],4:[function(e,n){(function(i){var s,o="undefined"!=typeof window?t:"undefined"!=typeof i?i.jQuery:null,r=e("./utils"),c=e("./inherits"),a=e("./unit"),l=r.isObject,u=r.isString,f=r.isFunction,d=r.isArray;s=function(t){t=t||{},this.options=o.extend(!0,{},this.constructor.DEFAULTS,t),this.handlers={},this.selecton=null,this.target=null,this.content=null,this.list=null,this.units=[],this.items={},this.buttons={},this.selected=null},s.prototype={constructor:s,events:{click:{button:"onButtonClick"}},_switchClass:function(t,e,n){u(e)?t.toggleClass(e,!!n):d(e)&&(t.addClass(e[+!!n]),t.removeClass(e[+!n]))},_createElement:function(){var t=function(t){return["<",t,"/>"].join("")};return function(e,n){var i,s,r,c=this;return i=o(t(e.tagName)).addClass(e.className),l(n)&&l(r=e.onData)&&o.each(n,function(t,e){r.attributes&&-1!==r.attributes.indexOf(t)&&i.attr(t,e),r.properties&&-1!==r.properties.indexOf(t)&&i.prop(t,e),r.classes&&(s=r.classes[t])&&c._switchClass(i,s,e),r.content&&r.content===t&&i.text(e)}),i}}(),_delegateEvents:function(){var t=this;o.each(this.events,function(e,n){o.each(n,function(n,i){var s;(s=t.options.view[n])&&t.content.on([e,t.options.event_namespace].join("."),[s.tagName,s.className.split(" ").join(".")].join("."),o.proxy(t[i],t))})})},initialize:function(t){this.target=o(t),this.list=this.createList(),this.content=this.createContent(),this.content.append(this.list),this.target.on("change",o.proxy(this.onChange,this))},finalize:function(){var t=this;o.each(this.units,function(e,n){t.iterator(n)}),this.sort(),o.each(this.units,function(e,n){var i,s;i=t.items[n.id],s=t.buttons[n.id],i.append(s),t.list.append(i)}),this.content.insertAfter(this.target),this._delegateEvents()},createList:function(){return this._createElement(this.options.view.list)},createContent:function(){return this._createElement(this.options.view.content)},createItem:function(t){return this._createElement(this.options.view.item,t)},createButton:function(t){return this._createElement(this.options.view.button,t)},unit:function(t,e){var n,i,s,o=this;return n=new a(e,t),this.filter(n)?(this.units.push(n),this.items[e]=i=this.createItem(t),this.buttons[e]=s=this.createButton(t),i.data(o.options.storageKey,{id:e}),s.data(o.options.storageKey,{id:e}),n.data.selected&&(this.selected=e),n):null},findUnit:function(t){var e,n;for(l(t)||(t={id:t}),n=0;n<this.units.length;n++){if(e=this.units[n],void 0!=t.id&&e.id===t.id)return e;if(void 0!=t.value&&e.data.value===t.value)return e}return null},sort:function(){var t,e=this;return t=o.map(this.units,function(t,n){var i;return i=e.comparator(t,n),{index:n,criteria:i,unit:t}}),t.sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),this.units=o.map(t,function(t){return t.unit})},filter:function(t){if(!(t instanceof a))throw new TypeError("Unit is expected");return!t.data.skip},bind:function(t){this.selecton=t},notify:function(t){this.selecton(t)},select:function(t){var e;if(this.selected!==t){try{e=this.options.view.item.onData.classes.selected}catch(n){}e&&(null!==this.selected&&this._switchClass(this.items[this.selected],e,!1),this._switchClass(this.items[t],e,!0));try{e=this.options.view.button.onData.classes.selected}catch(n){}e&&(null!==this.selected&&this._switchClass(this.buttons[this.selected],e,!1),this._switchClass(this.buttons[t],e,!0)),this.selected=t,this.notify(t)}},setHandler:function(t,e){this.handlers[t]&&(this.handlers[t]=e)},onChange:function(){var t;(t=this.findUnit({value:this.target.val()}))&&this.select(t.id)},onButtonClick:function(t){var e,n,i,s,r,c=this;e=o(t.currentTarget),n=e.data(this.options.storageKey),i=n.id,r=this.handlers.click,(s=this.findUnit(i))&&(f(r)?o.when(r.call(null,t,s)).then(function(){c.select(i)}):this.select(i))},find:function(t,e){var n=this,i=[];return"button"==t&&(o.each(this.units,function(t,n){e.call(null,n)&&i.push(n)}),i=o.map(i,function(t){return{button:n.buttons[t.id],item:n.items[t.id]}})),i},comparator:function(){},iterator:function(){},destroy:function(){}},s.DEFAULTS={storageKey:"selecton-storage",event_namespace:"selecton",view:{content:{tagName:"div",className:"selecton",onData:{attributes:[],properties:[],html:null,classes:null}},list:{tagName:"ul",className:"selecton-options",onData:{attributes:["class"],properties:[],content:null,classes:null}},item:{tagName:"li",className:"selecton-option",onData:{attributes:["class"],properties:[],content:null,classes:{selected:"is--active",disabled:"is--disabled"}}},button:{tagName:"button",className:"selecton-button",onData:{attributes:["title"],properties:["disabled"],content:"content",classes:{selected:"is--active",disabled:"is--disabled"}}}}},s.extend=function(t,e){return c(this,t,e)},n.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./inherits":3,"./unit":7,"./utils":8}],5:[function(t,e){var n=t("../processor");e.exports=n.extend({})},{"../processor":4}],6:[function(e,n){(function(i){var s="undefined"!=typeof window?t:"undefined"!=typeof i?i.jQuery:null,o=e("../utils"),r=o.isFunction,c=e("../processor");n.exports=c.extend({events:s.extend(!0,{click:{tumbler:"onToggleClick"}},c.prototype.events),constructor:function(){c.prototype.constructor.apply(this,arguments),this.visibile=null,this.eventNamespace=null},initialize:function(){c.prototype.initialize.apply(this,arguments),this.eventNamespace=["selecton-dropdown",(new Date).getTime(),Math.floor(1e4*Math.random())].join("-"),this.tumbler=this.createTumbler(),this.content.prepend(this.tumbler)},finalize:function(){c.prototype.finalize.apply(this,arguments),this.refreshTumblerCaption(),this.toggle(!1)},createTumbler:function(){return this._createElement(this.options.view.tumbler)},refreshTumblerCaption:function(){var t,e;null!==(t=this.selected)&&(e=this.findUnit(t))&&this.tumbler.text(e.data.content)},onToggleClick:function(t){var e,n=this;e=this.handlers.toggle,r(e)?s.when(e.call(null,t)).then(function(){n.toggle()}):this.toggle()},_toggleEvent:function(){var t;return function(){return t||(t=["click",this.eventNamespace].join("."))}}(),_hide:function(){var t,e=this;try{t=this.options.view.tumbler.onData.classes.toggle}catch(n){}return t&&this._switchClass(this.tumbler,t,!1),s.when(this.animateListOut()).then(function(){return e.visible=!1})},_show:function(){var t,e=this;try{t=this.options.view.tumbler.onData.classes.toggle}catch(n){}return t&&this._switchClass(this.tumbler,t,!0),s.when(this.animateListIn()).then(function(){return setTimeout(function(){s(document).on(e._toggleEvent(),function(t){-1==s(t.target).parents().index(e.list)&&(e._hide(),s(document).off(e._toggleEvent()))})},0),e.visible=!0})},animateListIn:function(){return this.list.show()},animateListOut:function(){return this.list.hide()},select:function(){c.prototype.select.apply(this,arguments),s(document).off(this._toggleEvent()),this.refreshTumblerCaption(),this.visible===!0&&this.toggle()},toggle:function(t){var e;return e=void 0==t?!this.visible:t,e?this._show():this._hide()}},s.extend(!0,{DEFAULTS:{view:{tumbler:{tagName:"button",className:"selecton-tumbler",onData:{classes:{toggle:"is--active"}}}}}},c))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../processor":4,"../utils":8}],7:[function(e,n){(function(e){var i,s="undefined"!=typeof window?t:"undefined"!=typeof e?e.jQuery:null;i=function(t,e){this.id=t,this.data={},s.extend(this.data,e)},i.prototype={constructor:i},n.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e){var n,i,s,o;n=function(t){return"[object Function]"==Object.prototype.toString.call(t)},i=function(t){return void 0!=t&&"[object Object]"==Object.prototype.toString.call(t)},s=function(t){return"[object String]"==Object.prototype.toString.call(t)},o=function(t){return"[object Array]"==Object.prototype.toString.call(t)},e.exports.isFunction=n,e.exports.isObject=i,e.exports.isString=s,e.exports.isArray=o},{}]},{},[1])(1)})});